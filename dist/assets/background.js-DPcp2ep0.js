const d="/assets/content.jsx-BK3xNJLc.js";let o=null;chrome.action.onClicked.addListener(async e=>{if(!(!e.id||!e.url||!e.url.startsWith("http"))){if(o&&o!==e.id)try{await chrome.tabs.sendMessage(o,{action:"REMOVE_UI"})}catch{}o=e.id;try{const t=await chrome.tabs.sendMessage(e.id,{action:"GET_STATUS"});t&&(t.status==="recording"||t.status==="paused")?await chrome.tabs.sendMessage(e.id,{action:"STOP_RECORDING"}):await chrome.tabs.sendMessage(e.id,{action:"TOGGLE_UI"})}catch(t){console.log("[Screen Recorder] Script not found, injecting...",t);try{await chrome.scripting.executeScript({target:{tabId:e.id},files:[d]})}catch(s){console.error("Injection failed:",s)}}}});chrome.tabs.onRemoved.addListener(e=>{e===o&&(o=null,chrome.action.setBadgeText({text:""}))});chrome.runtime.onMessage.addListener((e,t,s)=>{if(e.action==="UPDATE_STATUS"){const{status:n,time:c}=e;if(n==="recording"){const i=Math.floor(c/60),r=c%60,a=`${i}:${r.toString().padStart(2,"0")}`;chrome.action.setBadgeText({text:a}),chrome.action.setBadgeBackgroundColor({color:"#ef4444"})}else chrome.action.setBadgeText({text:""})}});
